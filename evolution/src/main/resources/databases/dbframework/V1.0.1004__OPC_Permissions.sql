USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_OPC`()
BEGIN

  IF ('true' = 'OPC_INSTALL' ) then
      
	INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  
	SELECT * FROM (SELECT 'OPC' as `app_key`,'OPC' as `app_name`,'Offer and Product Catalog' as `app_description`,'opc_components/styles/images/opc.png','OPC_URL_WEB_SERVER_PATH' as `web_link`,'/opc' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPC') LIMIT 1;
	SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPC';
	SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-ACCESS' as  `permission_key` ,'Access' as `permission_name`,'Permission to access OPC module' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-ACCESS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-ACCESS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIERS' as  `permission_key` ,'View suppliers' as `permission_name`,'Permission to  access suppliers' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIERS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIERS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIER-ADD-EDIT' as  `permission_key` ,'Add/Edit supplier' as `permission_name`,'Permission to  add/edit a supplier' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIER-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIER-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIER-DELETE' as  `permission_key` ,'Delete supplier' as `permission_name`,'Permission to  delete a supplier' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIER-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIER-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVES' as  `permission_key` ,'View offer objectives' as `permission_name`,'Permission to  access offer objectives' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVE-ADD-EDIT' as  `permission_key` ,'Add/Edit offer objective' as `permission_name`,'Permission to  add/edit a offer objective' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVE-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVE-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVE-DELETE' as  `permission_key` ,'Delete offer objective' as `permission_name`,'Permission to  delete a offer objective' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVE-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVE-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCTS' as  `permission_key` ,'View products' as `permission_name`,'Permission to access products' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCTS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCTS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-ADD-EDIT' as  `permission_key` ,'Add/Edit product' as `permission_name`,'Permission to add/edit a product' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-DELETE' as  `permission_key` ,'Delete product' as `permission_name`,'Permission to delete a product' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILES' as  `permission_key` ,'View files' as `permission_name`,'Permission to access files' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILE-UPLOAD' as  `permission_key` ,'Upload file' as `permission_name`,'Permission to upload a file' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILE-UPLOAD') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILE-UPLOAD';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILE-DELETE' as  `permission_key` ,'Delete file' as `permission_name`,'Permission to delete a file' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILE-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILE-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTICS' as  `permission_key` ,'View characteristics' as `permission_name`,'View characteristics' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTICS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTICS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTIC-ADD-EDIT' as  `permission_key` ,'Add/Edit characteristic' as `permission_name`,'Permission to add/edit a characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTIC-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTIC-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTIC-DELETE' as  `permission_key` ,'Delete characteristic' as `permission_name`,'Permission to delete a characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTIC-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTIC-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS' as  `permission_key` ,'View offers list' as `permission_name`,'Permission to  access offers' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-ADD-EDIT' as  `permission_key` ,'Add/Edit offer' as `permission_name`,'Permission to  add/edit an offer' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-DELETE' as  `permission_key` ,'Delete offer' as `permission_name`,'Permission to  delete an offer' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS' as  `permission_key` ,'View segments list' as `permission_name`,'Permission to  access segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-ADD-EDIT' as  `permission_key` ,'Add/Edit segment' as `permission_name`,'Permission to  add/edit a segment' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-DELETE' as  `permission_key` ,'Delete segment' as `permission_name`,'Permission to  delete a segment' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX' as  `permission_key` ,'View matrix' as `permission_name`,'Permission to  access matrix' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-ADD-EDIT' as  `permission_key` ,'Add/Edit matrix' as `permission_name`,'Permission to add/edit a matrix item' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-DELETE' as  `permission_key` ,'Delete matrix' as `permission_name`,'Permission to  delete a matrix item' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CUSTOMER' as  `permission_key` ,'View customer details' as `permission_name`,'Permission to  view customer details' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CUSTOMER') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CUSTOMER';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CUSTOMER-ACCEPT-OFFER' as  `permission_key` ,'Accept current offer' as `permission_name`,'Permission to accept customer current offer' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CUSTOMER-ACCEPT-OFFER') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CUSTOMER-ACCEPT-OFFER';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MAIN-DASHBOARD-REPORT' as  `permission_key` ,'Access Main Dashboard Report' as `permission_name`,'Permission to access Main Dashboard Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MAIN-DASHBOARD-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MAIN-DASHBOARD-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-PERFORMANCE-REPORT' as  `permission_key` ,'Access Channel Performance Report' as `permission_name`,'Permission to access Channel Performance Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-PERFORMANCE-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-PERFORMANCE-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-PERFORMANCE-REPORT' as  `permission_key` ,'Access Offer Performance Report' as `permission_name`,'Permission to access Offer Performance Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-PERFORMANCE-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-PERFORMANCE-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-REVENUE-CONTRIBUTION-REPORT' as  `permission_key` ,'Access  Revenue Contribution Report' as `permission_name`,'Permission to access Revenue Contribution Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-REVENUE-CONTRIBUTION-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-REVENUE-CONTRIBUTION-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-HOURLY-STATISTIC-REPORT' as  `permission_key` ,'Access Hourly Statistic Report' as `permission_name`,'Permission to access Hourly Statistic Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-HOURLY-STATISTIC-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-HOURLY-STATISTIC-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-RELATIONS' as  `permission_key` ,'Set user related segments' as `permission_name`,'Permission to  set user related segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-RELATIONS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-RELATIONS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-VIEW-ALL' as  `permission_key` ,'View all segments' as `permission_name`,'Permission to view all segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-VIEW-ALL') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-VIEW-ALL';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-LOG-REPORT' as  `permission_key` ,'Access Matrix Log Report' as `permission_name`,'Permission to access Matrix Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-LOG-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-LOG-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-LOG-REPORT' as  `permission_key` ,'Access Offers Log Report' as `permission_name`,'Permission to access Offers Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-LOG-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-LOG-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-LOG-REPORT' as  `permission_key` ,'Access Segments Log Report' as `permission_name`,'Permission to access Segments Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-LOG-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-LOG-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-ACCEPTANCES-LIVE-CHART' as  `permission_key` ,'Access Acceptances Live Chart' as `permission_name`,'Permisions to access Acceptances Live Chart' as `permission_description` ,@app_id as `app_id`,'Health Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-ACCEPTANCES-LIVE-CHART') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-ACCEPTANCES-LIVE-CHART';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATIONS-LIVE-CHART' as  `permission_key` ,'Access Presentations Live Chart' as `permission_name`,'Permisions to access Presentations Live Chart' as `permission_description` ,@app_id as `app_id`,'Health Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATIONS-LIVE-CHART') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATIONS-LIVE-CHART';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES' as  `permission_key` ,'View presentation strategies list' as `permission_name`,'Permission to access presentation strategies' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES-ADD-EDIT' as  `permission_key` ,'Add/Edit presentation strategy' as `permission_name`,'Permission to add/edit a presentation strategy' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES-DELETE' as  `permission_key` ,'Delete presentation strategy' as `permission_name`,'Permission to delete a presentation strategy' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES' as  `permission_key` ,'View scoring strategies list' as `permission_name`,'Permission to access scoring strategies' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES-ADD-EDIT' as  `permission_key` ,'Add/Edit scoring strategy' as `permission_name`,'Permission to add/edit a scoring strategy' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES-DELETE' as  `permission_key` ,'Delete scoring strategy' as `permission_name`,'Permission te delete a scoring strategy' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-MAPPED-PROPERTIES' as  `permission_key` ,'Channel Mapped Properties' as `permission_name`,'Channel Mapped Properties' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-MAPPED-PROPERTIES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-MAPPED-PROPERTIES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT' as  `permission_key` ,'Add/Edit Channel Mapped Properties' as `permission_name`,'Add/edit channel mapped properties' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-DELETE' as  `permission_key` ,'Delete channel' as `permission_name`,'Delete channel' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPES' as  `permission_key` ,'View product types' as `permission_name`,'Permissions to access product types' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPE-ADD-EDIT' as  `permission_key` ,'Add/Edit product type' as `permission_name`,'Permission to add/edit a product type' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPE-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPE-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPE-DELETE' as  `permission_key` ,'Delete product type' as `permission_name`,'Permission to delete a product type' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPE-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPE-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVES' as  `permission_key` ,'View catalog objectives' as `permission_name`,'Permission to  access catalogobjectives' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVES') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVES';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVE-ADD-EDIT' as  `permission_key` ,'Add/Edit catalogobjective' as `permission_name`,'Permission to  add/edit a offer objective' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVE-ADD-EDIT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVE-ADD-EDIT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVE-DELETE' as  `permission_key` ,'Delete catalog objective' as `permission_name`,'Permission to  delete a offer objective' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVE-DELETE') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVE-DELETE';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATIONSTRATEGIES-LOG-REPORT' as  `permission_key` ,'Access Presentation Strategies Log Report' as `permission_name`,'Permission to access Presentation Strategies Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATIONSTRATEGIES-LOG-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATIONSTRATEGIES-LOG-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORINGSTRATEGIES-LOG-REPORT' as  `permission_key` ,'Access Scoring Strategies Log Report' as `permission_name`,'Permission to access Scoring Strategies Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORINGSTRATEGIES-LOG-REPORT') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORINGSTRATEGIES-LOG-REPORT';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_OPC`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_OPC`;