INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'UM' as `app_key`,'Application & User Management' as `app_name`,'Application & User Management, allows administrator to configure Applications available on the system, as well as authorised Users and Workgroups with permissions.' as `app_description`,'fwk_components/styles/images/um.png','UM_URL_WEB_SERVER_PATH' as `web_link`,'/um' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'UM') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'UM';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-ACCESS' as  `permission_key` ,'Users Management Access ' as `permission_name`,'Permission to access Users Management Module' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-USERS-VIEW' as  `permission_key` ,'View users list' as `permission_name`,'Permission to view users list' as `permission_description` ,@app_id as `app_id`,'Users' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-USERS-VIEW') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-USERS-VIEW';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-USERS-EDIT' as  `permission_key` ,'Add/Edit user' as `permission_name`,'Permission to add/ edit a user' as `permission_description` ,@app_id as `app_id`,'Users' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-USERS-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-USERS-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-USERS-DELETE' as  `permission_key` ,'Delete user' as `permission_name`,'Permission to delete a user' as `permission_description` ,@app_id as `app_id`,'Users' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-USERS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-USERS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-WORKGROUPS-VIEW' as  `permission_key` ,'View workgroups hierarchy' as `permission_name`,'Permission to view workgroups hierarchy' as `permission_description` ,@app_id as `app_id`,'Workgroups' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-WORKGROUPS-VIEW') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-WORKGROUPS-VIEW';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-WORKGROUPS-EDIT' as  `permission_key` ,'Add/Edit workgroup' as `permission_name`,'Permission to add/ edit a workgroup' as `permission_description` ,@app_id as `app_id`,'Workgroups' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-WORKGROUPS-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-WORKGROUPS-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-WORKGROUPS-DELETE' as  `permission_key` ,'Delete workgroup' as `permission_name`,'Permission to delete a workgroup' as `permission_description` ,@app_id as `app_id`,'Workgroups' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-WORKGROUPS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-WORKGROUPS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UM-TOOLS' as  `permission_key` ,'Tools' as `permission_name`,'Permission to create/delete users from a file' as `permission_description` ,@app_id as `app_id`,'Users' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UM-TOOLS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UM-TOOLS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'AM-ACCESS' as  `permission_key` ,'Applications Management Access' as `permission_name`,'Permission to access Applications Management' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'AM-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='AM-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_CSR`()
BEGIN

  IF ('true' = 'CSR_INSTALL' ) then
      

INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'CSR' as `app_key`,'Customer Care' as `app_name`,'Customer Care, allows agents to visualise Customerâ€™s details, profile and activity history, as well as to propose Offers & Campaigns in a personalised manner.' as `app_description`,'csr_components/styles/images/csr.png','CSR_URL_WEB_SERVER_PATH' as `web_link`,'/csr' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'CSR') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'CSR';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-ACCESS' as  `permission_key` ,'CSR Access' as `permission_name`,'Permission to access CSR Module' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER' as  `permission_key` ,'Access' as `permission_name`,'Permission to access Customer Module' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-OVERVIEW' as  `permission_key` ,'Overview' as `permission_name`,'Permission to access Customer Overview' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-OVERVIEW') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-OVERVIEW';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-ACTIVITYLOG' as  `permission_key` ,'Activity Log' as `permission_name`,'Permission to access Customer Activity Log' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-ACTIVITYLOG') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-ACTIVITYLOG';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-ELIGIBLECAMPAIGNS' as  `permission_key` ,'Eligible Campaigns' as `permission_name`,'Permission to access Customer Eligible Campaigns' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-ELIGIBLECAMPAIGNS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-ELIGIBLECAMPAIGNS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-LATESTOFFERS' as  `permission_key` ,'Latest Offers' as `permission_name`,'Permission to access Customer Latest Offers' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-LATESTOFFERS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-LATESTOFFERS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-LOYALITYPROGRAMS' as  `permission_key` ,'Loyality Programs' as `permission_name`,'Permission to access Customer Loyality Programs' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-LOYALITYPROGRAMS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-LOYALITYPROGRAMS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'CSR-CUSTOMER-NBOA' as  `permission_key` ,'NBO/A' as `permission_name`,'Permission to access Customer NBO/A' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'CSR-CUSTOMER-NBOA') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='CSR-CUSTOMER-NBOA';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_CSR`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_CSR`;

 

USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_OPC`()
BEGIN

  IF ('true' = 'OPC_INSTALL' ) then
  INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'OPC' as `app_key`,'Real Time Offer Manager' as `app_name`,'Offer Manager, allows to configure and manage Offers, Products, Suppliers and Partners to be used for both inbound and outbound.' as `app_description`,'opc_components/styles/images/opc.png','OPC_URL_WEB_SERVER_PATH' as `web_link`,'/opc/dashboard' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPC') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPC';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-ACCESS' as  `permission_key` ,'Access' as `permission_name`,'Permission to access OPC module' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIERS' as  `permission_key` ,'View suppliers' as `permission_name`,'Permission to  access suppliers' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIERS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIERS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIER-ADD-EDIT' as  `permission_key` ,'Add/Edit supplier' as `permission_name`,'Permission to  add/edit a supplier' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIER-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIER-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SUPPLIER-DELETE' as  `permission_key` ,'Delete supplier' as `permission_name`,'Permission to  delete a supplier' as `permission_description` ,@app_id as `app_id`,'Suppliers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SUPPLIER-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SUPPLIER-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVES' as  `permission_key` ,'View offer objectives' as `permission_name`,'Permission to  access offer objectives' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVE-ADD-EDIT' as  `permission_key` ,'Add/Edit offer objective' as `permission_name`,'Permission to  add/edit a offer objective' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVE-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVE-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-OBJECTIVE-DELETE' as  `permission_key` ,'Delete offer objective' as `permission_name`,'Permission to  delete a offer objective' as `permission_description` ,@app_id as `app_id`,'Offer Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-OBJECTIVE-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-OBJECTIVE-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCTS' as  `permission_key` ,'View products' as `permission_name`,'Permission to access products' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCTS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCTS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-ADD-EDIT' as  `permission_key` ,'Add/Edit product' as `permission_name`,'Permission to add/edit a product' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-DELETE' as  `permission_key` ,'Delete product' as `permission_name`,'Permission to delete a product' as `permission_description` ,@app_id as `app_id`,'Products' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILES' as  `permission_key` ,'View files' as `permission_name`,'Permission to access files' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILE-UPLOAD' as  `permission_key` ,'Upload file' as `permission_name`,'Permission to upload a file' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILE-UPLOAD') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILE-UPLOAD';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-FILE-DELETE' as  `permission_key` ,'Delete file' as `permission_name`,'Permission to delete a file' as `permission_description` ,@app_id as `app_id`,'Files' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-FILE-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-FILE-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTICS' as  `permission_key` ,'View characteristics' as `permission_name`,'View characteristics' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTICS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTICS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTIC-ADD-EDIT' as  `permission_key` ,'Add/Edit characteristic' as `permission_name`,'Permission to add/edit a characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTIC-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTIC-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHARACTERISTIC-DELETE' as  `permission_key` ,'Delete characteristic' as `permission_name`,'Permission to delete a characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHARACTERISTIC-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHARACTERISTIC-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS' as  `permission_key` ,'View offers list' as `permission_name`,'Permission to  access offers' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-ADD-EDIT' as  `permission_key` ,'Add/Edit offer' as `permission_name`,'Permission to  add/edit an offer' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-DELETE' as  `permission_key` ,'Delete offer' as `permission_name`,'Permission to  delete an offer' as `permission_description` ,@app_id as `app_id`,'Offers' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS' as  `permission_key` ,'View segments list' as `permission_name`,'Permission to  access segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-ADD-EDIT' as  `permission_key` ,'Add/Edit segment' as `permission_name`,'Permission to  add/edit a segment' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-DELETE' as  `permission_key` ,'Delete segment' as `permission_name`,'Permission to  delete a segment' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX' as  `permission_key` ,'View matrix' as `permission_name`,'Permission to  access matrix' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-ADD-EDIT' as  `permission_key` ,'Add/Edit matrix' as `permission_name`,'Permission to add/edit a matrix item' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-DELETE' as  `permission_key` ,'Delete matrix' as `permission_name`,'Permission to  delete a matrix item' as `permission_description` ,@app_id as `app_id`,'Matrix' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CUSTOMER' as  `permission_key` ,'View customer details' as `permission_name`,'Permission to  view customer details' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CUSTOMER') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CUSTOMER';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CUSTOMER-ACCEPT-OFFER' as  `permission_key` ,'Accept current offer' as `permission_name`,'Permission to accept customer current offer' as `permission_description` ,@app_id as `app_id`,'Customer' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CUSTOMER-ACCEPT-OFFER') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CUSTOMER-ACCEPT-OFFER';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MAIN-DASHBOARD-REPORT' as  `permission_key` ,'Access Main Dashboard Report' as `permission_name`,'Permission to access Main Dashboard Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MAIN-DASHBOARD-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MAIN-DASHBOARD-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-PERFORMANCE-REPORT' as  `permission_key` ,'Access Channel Performance Report' as `permission_name`,'Permission to access Channel Performance Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-PERFORMANCE-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-PERFORMANCE-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFER-PERFORMANCE-REPORT' as  `permission_key` ,'Access Offer Performance Report' as `permission_name`,'Permission to access Offer Performance Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFER-PERFORMANCE-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFER-PERFORMANCE-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-REVENUE-CONTRIBUTION-REPORT' as  `permission_key` ,'Access  Revenue Contribution Report' as `permission_name`,'Permission to access Revenue Contribution Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-REVENUE-CONTRIBUTION-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-REVENUE-CONTRIBUTION-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-HOURLY-STATISTIC-REPORT' as  `permission_key` ,'Access Hourly Statistic Report' as `permission_name`,'Permission to access Hourly Statistic Report' as `permission_description` ,@app_id as `app_id`,'Business Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-HOURLY-STATISTIC-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-HOURLY-STATISTIC-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-RELATIONS' as  `permission_key` ,'Set user related segments' as `permission_name`,'Permission to  set user related segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-RELATIONS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-RELATIONS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-VIEW-ALL' as  `permission_key` ,'View all segments' as `permission_name`,'Permission to view all segments' as `permission_description` ,@app_id as `app_id`,'Segments' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-VIEW-ALL') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-VIEW-ALL';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-MATRIX-LOG-REPORT' as  `permission_key` ,'Access Matrix Log Report' as `permission_name`,'Permission to access Matrix Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-MATRIX-LOG-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-MATRIX-LOG-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-OFFERS-LOG-REPORT' as  `permission_key` ,'Access Offers Log Report' as `permission_name`,'Permission to access Offers Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-OFFERS-LOG-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-OFFERS-LOG-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SEGMENTS-LOG-REPORT' as  `permission_key` ,'Access Segments Log Report' as `permission_name`,'Permission to access Segments Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SEGMENTS-LOG-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SEGMENTS-LOG-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-ACCEPTANCES-LIVE-CHART' as  `permission_key` ,'Access Acceptances Live Chart' as `permission_name`,'Permisions to access Acceptances Live Chart' as `permission_description` ,@app_id as `app_id`,'Health Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-ACCEPTANCES-LIVE-CHART') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-ACCEPTANCES-LIVE-CHART';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATIONS-LIVE-CHART' as  `permission_key` ,'Access Presentations Live Chart' as `permission_name`,'Permisions to access Presentations Live Chart' as `permission_description` ,@app_id as `app_id`,'Health Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATIONS-LIVE-CHART') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATIONS-LIVE-CHART';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES' as  `permission_key` ,'View presentation strategies list' as `permission_name`,'Permission to access presentation strategies' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES-ADD-EDIT' as  `permission_key` ,'Add/Edit presentation strategy' as `permission_name`,'Permission to add/edit a presentation strategy' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATION-STRATEGIES-DELETE' as  `permission_key` ,'Delete presentation strategy' as `permission_name`,'Permission to delete a presentation strategy' as `permission_description` ,@app_id as `app_id`,'Presentation Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATION-STRATEGIES-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATION-STRATEGIES-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES' as  `permission_key` ,'View scoring strategies list' as `permission_name`,'Permission to access scoring strategies' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES-ADD-EDIT' as  `permission_key` ,'Add/Edit scoring strategy' as `permission_name`,'Permission to add/edit a scoring strategy' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORING-STRATEGIES-DELETE' as  `permission_key` ,'Delete scoring strategy' as `permission_name`,'Permission te delete a scoring strategy' as `permission_description` ,@app_id as `app_id`,'Scoring Strategies' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORING-STRATEGIES-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORING-STRATEGIES-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-MAPPED-PROPERTIES' as  `permission_key` ,'Channel Mapped Properties' as `permission_name`,'Channel Mapped Properties' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-MAPPED-PROPERTIES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-MAPPED-PROPERTIES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT' as  `permission_key` ,'Add/Edit Channel Mapped Properties' as `permission_name`,'Add/edit channel mapped properties' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-MAPPED-PROPERTIES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CHANNEL-DELETE' as  `permission_key` ,'Delete channel' as `permission_name`,'Delete channel' as `permission_description` ,@app_id as `app_id`,'OPCChannelMappedProperties' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CHANNEL-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CHANNEL-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPES' as  `permission_key` ,'View product types' as `permission_name`,'Permissions to access product types' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPE-ADD-EDIT' as  `permission_key` ,'Add/Edit product type' as `permission_name`,'Permission to add/edit a product type' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPE-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPE-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRODUCT-TYPE-DELETE' as  `permission_key` ,'Delete product type' as `permission_name`,'Permission to delete a product type' as `permission_description` ,@app_id as `app_id`,'Product Types' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRODUCT-TYPE-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRODUCT-TYPE-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVES' as  `permission_key` ,'View catalog objectives' as `permission_name`,'Permission to  access catalogobjectives' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVE-ADD-EDIT' as  `permission_key` ,'Add/Edit catalogobjective' as `permission_name`,'Permission to  add/edit a offer objective' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVE-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVE-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-CATALOG-OBJECTIVE-DELETE' as  `permission_key` ,'Delete catalog objective' as `permission_name`,'Permission to  delete a offer objective' as `permission_description` ,@app_id as `app_id`,'Catalog Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-CATALOG-OBJECTIVE-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-CATALOG-OBJECTIVE-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-PRESENTATIONSTRATEGIES-LOG-REPORT' as  `permission_key` ,'Access Presentation Strategies Log Report' as `permission_name`,'Permission to access Segments Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-PRESENTATIONSTRATEGIES-LOG-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-PRESENTATIONSTRATEGIES-LOG-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SCORINGSTRATEGIES-LOG-REPORT' as  `permission_key` ,'Access Scoring Strategies Log Report' as `permission_name`,'Permission to access Scoring Strategies Log Report' as `permission_description` ,@app_id as `app_id`,'Audit Reports' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SCORINGSTRATEGIES-LOG-REPORT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SCORINGSTRATEGIES-LOG-REPORT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SALES-CHANNELS' as  `permission_key` ,'View sales channels' as `permission_name`,'Permissions to access sales channels' as `permission_description` ,@app_id as `app_id`,'Sales Channels' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SALES-CHANNELS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SALES-CHANNELS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SALES-CHANNELS-ADD-EDIT' as  `permission_key` ,'Add/Edit sales channels' as `permission_name`,'Permission to  add/edit a sale channel' as `permission_description` ,@app_id as `app_id`,'Sales Channels' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SALES-CHANNELS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SALES-CHANNELS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPC-SALES-CHANNELS-DELETE' as  `permission_key` ,'Delete  sales channel' as `permission_name`,'Permission to  delete a sales channel' as `permission_description` ,@app_id as `app_id`,'Sales Channels' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPC-SALES-CHANNELS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPC-SALES-CHANNELS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_OPC`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_OPC`;





USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_JMR`()
BEGIN

  IF ('true' = 'JMR_INSTALL' ) then
  
INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'JMR' as `app_key`,'Journey Manager' as `app_name`,'Journey Manager, allows to configure and manage Customer Journeys and Campaigns with corresponding objectives and limits.' as `app_description`,'jmr_components/styles/images/jmr.png','JMR_URL_WEB_SERVER_PATH' as `web_link`,'/jmr' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'JMR') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'JMR';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-ACCESS' as  `permission_key` ,'Access' as `permission_name`,'Journey Manager' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-JOURNEYS' as  `permission_key` ,'Journeys' as `permission_name`,'Access Journeys module' as `permission_description` ,@app_id as `app_id`,'Journeys' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-JOURNEYS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-JOURNEYS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-JOURNEYS-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit Journey' as `permission_description` ,@app_id as `app_id`,'Journeys' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-JOURNEYS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-JOURNEYS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-JOURNEYS-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete Journey' as `permission_description` ,@app_id as `app_id`,'Journeys' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-JOURNEYS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-JOURNEYS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-CAMPAIGNS' as  `permission_key` ,'Campaigns' as `permission_name`,'Access Campaigns module' as `permission_description` ,@app_id as `app_id`,'Campaigns' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-CAMPAIGNS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-CAMPAIGNS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-CAMPAIGNS-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit Campaign' as `permission_description` ,@app_id as `app_id`,'Campaigns' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-CAMPAIGNS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-CAMPAIGNS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-CAMPAIGNS-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete Campaign' as `permission_description` ,@app_id as `app_id`,'Campaigns' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-CAMPAIGNS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-CAMPAIGNS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-DIALOGUE-TEMPLATES' as  `permission_key` ,'DialogueTemplates' as `permission_name`,'Access Dialogue Templates' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-DIALOGUE-TEMPLATES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-DIALOGUE-TEMPLATES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-DIALOGUE-TEMPLATES-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit Dialogue Template' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-DIALOGUE-TEMPLATES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-DIALOGUE-TEMPLATES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-DIALOGUE-TEMPLATES-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete Dialogue Template' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-DIALOGUE-TEMPLATES-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-DIALOGUE-TEMPLATES-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-JOURNEYS-START' as  `permission_key` ,'Start' as `permission_name`,'Permission to start a journey' as `permission_description` ,@app_id as `app_id`,'Journeys' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-JOURNEYS-START') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-JOURNEYS-START';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-JOURNEYS-STOP' as  `permission_key` ,'Stop' as `permission_name`,'Permission to stop journey' as `permission_description` ,@app_id as `app_id`,'Journeys' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-JOURNEYS-STOP') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-JOURNEYS-STOP';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-CAMPAIGNS-START' as  `permission_key` ,'Start' as `permission_name`,'Permission to start a campaign' as `permission_description` ,@app_id as `app_id`,'Campaigns' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-CAMPAIGNS-START') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-CAMPAIGNS-START';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-CAMPAIGNS-STOP' as  `permission_key` ,'Stop' as `permission_name`,'Permission to stop a campaign' as `permission_description` ,@app_id as `app_id`,'Campaigns' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-CAMPAIGNS-STOP') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-CAMPAIGNS-STOP';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-OBJECTIVES' as  `permission_key` ,'Objectives' as `permission_name`,'Access objecives module' as `permission_description` ,@app_id as `app_id`,'Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-OBJECTIVES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-OBJECTIVES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-OBJECTIVE-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit Objective' as `permission_description` ,@app_id as `app_id`,'Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-OBJECTIVE-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-OBJECTIVE-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-OBJECTIVE-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete' as `permission_description` ,@app_id as `app_id`,'Objectives' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-OBJECTIVE-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-OBJECTIVE-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-PROGRAMS' as  `permission_key` ,'Programs' as `permission_name`,'Access Programs module' as `permission_description` ,@app_id as `app_id`,'Programs' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-PROGRAMS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-PROGRAMS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-PROGRAMS-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit Program' as `permission_description` ,@app_id as `app_id`,'Programs' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-PROGRAMS-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-PROGRAMS-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'JMR-PROGRAMS-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete Program' as `permission_description` ,@app_id as `app_id`,'Programs' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'JMR-PROGRAMS-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='JMR-PROGRAMS-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_JMR`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_JMR`;




USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_IAR`()
BEGIN

  IF ('true' = 'IAR_INSTALL' ) then
 
	INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  
	SELECT * FROM (SELECT 'IAR' as `app_key`,'InsightsAnalytics' as `app_name`,'Insights Analytics Reports' as `app_description`,'fwk_components/styles/images/am.png','IAR_URL_WEB_SERVER_PATH' as `web_link`,'/iar' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'IAR') LIMIT 1;
	SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'IAR';
	SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
	INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'IAR-ACCESS' as  `permission_key` ,'Applications Access' as `permission_name`,'Permission to access Applications' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'IAR-ACCESS') LIMIT 1;
	SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='IAR-ACCESS';
	INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1; 
  
  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_IAR`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_IAR`;

USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_OPR`()
BEGIN

  IF ('true' = 'OPR_INSTALL' ) then

INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  
SELECT * FROM (SELECT 'OPR' as `app_key`,'Operations' as `app_name`,'Operations Reports' as `app_description`,'fwk_components/styles/images/am.png','OPR_URL_WEB_SERVER_PATH' as `web_link`,'/opr' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPR') LIMIT 1;
SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'OPR';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'OPR-ACCESS' as  `permission_key` ,'Applications Access' as `permission_name`,'Permission to access Applications' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'OPR-ACCESS') LIMIT 1;
SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='OPR-ACCESS';
INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

  END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_OPR`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_OPR`;


USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_STG`()
BEGIN

 IF ('true' = 'STG_INSTALL' ) then

INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'STG' as `app_key`,'Settings' as `app_name`,'Settings, allows to configure the solution Global Parameters and Shared Variables such as for Reports, Characteristics, Templatesâ€¦' as `app_description`,'stg_components/styles/images/stg.png','STG_URL_WEB_SERVER_PATH' as `web_link`,'/stg/dashboard' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'STG') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'STG';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-CHARACTERISTICS' as  `permission_key` ,'Characteristics' as `permission_name`,'Access characteristics' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-CHARACTERISTICS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-CHARACTERISTICS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-DIALOGUE-TEMPLATES' as  `permission_key` ,'Dialogue Templates' as `permission_name`,'Access dialogue templates' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-DIALOGUE-TEMPLATES') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-DIALOGUE-TEMPLATES';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-ACCESS' as  `permission_key` ,'Access' as `permission_name`,'Access to settings application' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-CHARACTERISTIC-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-CHARACTERISTIC-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-CHARACTERISTIC-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-CHARACTERISTIC-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete characteristic' as `permission_description` ,@app_id as `app_id`,'Characteristics' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-CHARACTERISTIC-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-CHARACTERISTIC-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-DIALOGUE-TEMPLATES-ADD-EDIT' as  `permission_key` ,'Add/Edit' as `permission_name`,'Add/Edit dialogue template' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-DIALOGUE-TEMPLATES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-DIALOGUE-TEMPLATES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'STG-DIALOGUE-TEMPLATES-DELETE' as  `permission_key` ,'Delete' as `permission_name`,'Delete dialogue templete' as `permission_description` ,@app_id as `app_id`,'Dialogue Templates' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'STG-DIALOGUE-TEMPLATES-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='STG-DIALOGUE-TEMPLATES-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;

 END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_STG`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_STG`;


USE `dbframework`;
SET NAMES utf8 ;

DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `stp_proc_install_SBM`()
BEGIN

 IF ('true' = 'SBM_INSTALL' ) then
INSERT INTO `dbframework`.`tbl_apps`(`app_key`,`app_name`,`app_description`,`app_logo`,`web_link`,`app_path`)  SELECT * FROM (SELECT 'SBM' as `app_key`,'Subscriber Base Management' as `app_name`,'Base Management, allows to configure Dimensions with Segments used to profile customers, as well as to manage Target Templates and Target Lists used for outbound campaigns.' as `app_description`,'fwk_components/styles/images/app-logo-profiler.png','SBM_URL_WEB_SERVER_PATH' as `web_link`,'/' as `app_path`) AS tmp WHERE NOT EXISTS (SELECT `app_key` FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'SBM') LIMIT 1;
 SELECT `app_id` INTO @app_id FROM `dbframework`.`tbl_apps` WHERE `app_key` = 'SBM';
SELECT `workgroup_id` INTO @wid from `dbframework`.`tbl_workgroups` WHERE `workgroup_key`='WKG-ADMIN';
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UCG-ACCESS' as  `permission_key` ,'Access' as `permission_name`,'Permission to access UCG module' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UCG-ACCESS') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UCG-ACCESS';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UCG-RULES-ADD-EDIT' as  `permission_key` ,'Add/edit a rule' as `permission_name`,'Permission to add/edit a rule' as `permission_description` ,@app_id as `app_id`,'Rules' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UCG-RULES-ADD-EDIT') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UCG-RULES-ADD-EDIT';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UCG-RULES-View' as  `permission_key` ,'Rules View' as `permission_name`,'Permission to view rules module' as `permission_description` ,@app_id as `app_id`,'Rules' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UCG-RULES-View') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UCG-RULES-View';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UCG-RULES-DELETE' as  `permission_key` ,'Dele a rule' as `permission_name`,'Permission to delete a rule' as `permission_description` ,@app_id as `app_id`,'Rules' as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UCG-RULES-DELETE') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UCG-RULES-DELETE';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
INSERT INTO `dbframework`.`tbl_permissions`(`permission_key`,`permission_name`,`permission_description`,`app_id`,`folder`) SELECT * FROM (SELECT 'UCG-CALCULATION' as  `permission_key` ,'Ucg Calculation' as `permission_name`,'Permission to access UCG Calculation' as `permission_description` ,@app_id as `app_id`,null as `folder`) AS tmp WHERE NOT EXISTS (SELECT `permission_key` FROM `dbframework`.`tbl_permissions` WHERE `permission_key` = 'UCG-CALCULATION') LIMIT 1;
 SELECT permission_id INTO @perid from  `dbframework`.`tbl_permissions` WHERE `permission_key`='UCG-CALCULATION';
 INSERT INTO `dbframework`.`tbl_workgroups_permissions`(`workgroup_id`,`permission_id`) SELECT * FROM (SELECT @wid as `workgroup_id` ,@perid as `permission_id`) AS tmp WHERE NOT EXISTS ( SELECT `workgroup_id` FROM `dbframework`.`tbl_workgroups_permissions` WHERE `workgroup_id` = @wid AND `permission_id`=@perid) LIMIT 1;
 
 END IF;
END ;;
DELIMITER ;

-- Execute the procedure
call `dbframework`.`stp_proc_install_SBM`();

-- Drop the procedure
DROP PROCEDURE `dbframework`.`stp_proc_install_SBM`;

 
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='fwk_components/styles/images/um.png',`app_name`='Application & User Management',`app_description`= 'Application & User Management, allows administrator to configure Applications available on the system, as well as authorised Users and Workgroups with permissions.' where `app_key`='UM';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='itm_components/styles/images/itm.png',`app_name`='Trigger Engine',`app_description`= 'Trigger Engine' where `app_key`='ITM';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='jmr_components/styles/images/jmr.png',`app_name`='Journey Manager',`app_description`= 'Journey Manager, allows to configure and manage Customer Journeys and Campaigns with corresponding objectives and limits.' where `app_key`='JMR';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='opc_components/styles/images/opc.png',`app_name`='Real Time Offer Manager',`app_description`= 'Offer Manager, allows to configure and manage Offers, Products, Suppliers and Partners to be used for both inbound and outbound.' where `app_key`='OPC';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='fwk_components/styles/images/am.png',`app_name`='Subscriber Base Management',`app_description`= 'Universal Control Group' where `app_key`='UCG';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='csr_components/styles/images/csr.png',`app_name`='Customer Care',`app_description`= 'Customer Care, allows agents to visualise Customerâ€™s details, profile and activity history, as well as to propose Offers & Campaigns in a personalised manner.' where `app_key`='CSR';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='fwk_components/styles/images/am.png',`app_name`='Insights and Analytics',`app_description`= 'Insights & Analytics, allows to visualise the Marketing Dashboard presenting KPIs, Graphs and Charts reporting the performance of the solution, as well as to dig down the data for detailed analysis.' where `app_key`='IAR';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='fwk_components/styles/images/am.png',`app_name`='Operations',`app_description`= 'Monitoring, allows to visualise the System Monitoring Dashboard presenting Graphs, Statistics and Alarms used to monitor the level of resource utilisation to supervise the good health of the system and to detect possible incidents.' where `app_key`='OPR';
UPDATE `dbframework`.`tbl_apps` SET `app_logo`='stg_components/styles/images/stg.png',`app_name`='Settings',`app_description`= 'Settings, allows to configure the solution Global Parameters and Shared Variables such as for Reports, Characteristics, Templatesâ€¦' where `app_key`='STG';